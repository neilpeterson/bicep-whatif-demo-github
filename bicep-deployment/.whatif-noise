# Azure What-If Noise Patterns
#
# This file contains summary text patterns that are commonly identified as noise
# in Azure What-If deployment output. When a resource's LLM-generated summary
# matches one of these patterns (using fuzzy matching), its confidence score is
# lowered to indicate it's likely not a real infrastructure change.
#
# Usage:
#   az deployment group what-if ... | bicep-whatif-advisor --noise-file .whatif-noise
#
# Format:
#   - One pattern per line
#   - Lines starting with # are comments (ignored)
#   - Blank lines are ignored
#   - Fuzzy matching with 80% similarity threshold (configurable via --noise-threshold)
#
# How it works:
#   1. LLM analyzes What-If output and generates summaries for each resource
#   2. Each summary is compared against patterns in this file
#   3. If similarity >= 80%, confidence is set to 10 (very low)
#   4. Default --min-confidence 70 will filter these resources
#
# Tips:
#   - Add patterns based on real noise you encounter
#   - Be specific enough to avoid false positives
#   - Test patterns with --noise-threshold to tune sensitivity
#   - Commit this file to version control to share with your team

# ============================================================================
# Subnet Reference Changes
# ============================================================================
# Azure often changes subnet references from hardcoded IDs to dynamic ARM functions
fuzzy: Changing subnet reference from hardcoded ID to dynamic reference
fuzzy: Changing subnet reference from hardcoded to dynamic
fuzzy: Updating subnet ID reference to use ARM function
fuzzy: Converting hardcoded subnet ID to dynamic reference

# ============================================================================
# IPv6 Configuration Changes
# ============================================================================
# IPv6 flags frequently toggle without code changes
fuzzy: Removing IPv6 flag
fuzzy: Changing disableIpv6 property
fuzzy: Disabling IPv6 addressing
fuzzy: Changing enableIPv6Addressing property
fuzzy: Toggling IPv6 configuration
fuzzy: IPv6 flag changing from enabled to disabled
fuzzy: IPv6 flag changing from disabled to enabled

# ============================================================================
# Log Analytics Destination Type
# ============================================================================
# This property changes between deployment runs without code modifications
fuzzy: Changing logAnalyticsDestinationType property
fuzzy: Updating Log Analytics destination type
fuzzy: Modifying logAnalyticsDestinationType setting
fuzzy: Log Analytics destination changing from Dedicated to AzureDiagnostics

# ============================================================================
# Tags Only Changes
# ============================================================================
# Tag-only modifications are often not significant for deployment safety
fuzzy: Updating tags only
fuzzy: Changing only resource tags
fuzzy: Modifying tags without other changes
fuzzy: Only tag values are changing
fuzzy: Tags are being updated

# ============================================================================
# Diagnostic Settings
# ============================================================================
# Diagnostic settings often appear as noise
fuzzy: Modifying diagnostic settings
fuzzy: Updating Application Insights diagnostics
fuzzy: Changing diagnostic configuration
fuzzy: Adding diagnostic settings

# ============================================================================
# Metadata Properties
# ============================================================================
# System-managed metadata that doesn't represent real changes
fuzzy: Changing only etag property
fuzzy: Updating provisioningState metadata
fuzzy: Changing resource ID reference
fuzzy: Updating metadata properties only
fuzzy: Only etag is changing
fuzzy: System metadata property update

# ============================================================================
# Monitoring & Application Insights
# ============================================================================
# These are often deployed as dependencies but not the main change
fuzzy: Adding Application Insights logging
fuzzy: Adding Application Insights monitoring
fuzzy: Creating Application Insights resource
fuzzy: Deploying monitoring components

# ============================================================================
# Computed/Read-Only Properties
# ============================================================================
# Properties that Azure manages automatically
fuzzy: Changing resourceGuid property
fuzzy: Updating system-generated identifier
fuzzy: Modifying read-only property
fuzzy: System-managed property changing

# ============================================================================
# Custom Patterns
# ============================================================================
# Add your organization-specific noise patterns below
# Example: Common recurring changes in your environment
fuzzy: Removing blob delete retention policy configuration
fuzzy: Swaps two security rules
fuzzy: Changes subnet reference from hardcoded ID to dynamic reference expression and removes IPv6 flag
fuzzy: Removing logAnalyticsDestinationType property and retention policy settings from Key Vault diagnostic settings
fuzzy: Removing retention policy settings and capacity metrics from storage blob diagnostic settings
fuzzy: Removing retention policy settings and capacity metrics from storage account diagnostic settings
fuzzy: Removing deleteRetentionPolicy properties
fuzzy: Removes retention policy settings from Key Vault diagnostics
fuzzy: Removes retention policy and capacity metrics from diagnostics

# Patterns
retention
reference
deleteRetentionPolicy
Modifying diagnostic
retention policy
